{% extends 'base.html' %}

{% set title = "Overview of Events" %}

{% block title %}{{ title }}{% endblock %}
{% block header %}{{ title }}{% endblock %}

{% block content %}
  <div class="container">
    <input class="form-control" id="myInput" type="text" placeholder="Search..">
    <table class="table table-bordered table-striped">
      <thead class="sticky_thead">
        <tr>
          <th>Event</th>
          <th>People</th>
          <th>Songs</th>
        </tr>
      </thead>
      <tbody id="myTable">        
        {% for summary in summaries %}
          <tr>
            <td>
              <dl>
                <dt>Event</dt>
                <dd>- <a href="{{ url_for('detail_event_occ', event_occ_id=summary['event']['event_occ_id']) }}">
                  {{ summary['event']['event_occ'] }}</a>
                </dd>
                <dt>Venue</dt>
                <dd>- <a href="{{ url_for('detail_venue', venue_id=summary['venue']['venue_id']) }}">
                    {{ summary['venue']['venue_name'] }}</a>
                </dd>
                <dt>Date</dt>
                <dd>- {{summary['event']['event_occ_date']}}</dd>
              </dl>
            </td>
            <td>
              <ul>
                {% for person in summary['players'] %}
                <li>
                  <a href="{{ url_for('detail_person', person_id=person['person_id']) }}">
                    {{person['public_name']}}
                  </a>
                </li>
                {% endfor %}
              </ul>
            </td>
            <td>
              <ul>
                {% for song in summary['songs'] %}                
                <li>
                  <a href="{{ url_for('detail_performed_song', song_perform_id=song['song_perform_id']) }}">
                    {{ song["song"] }}
                 </a>
                </li>
                {% endfor %}
              </ul>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <script>
    $(document).ready(function(){
      $("#myInput").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#myTable tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });
  </script>

{% endblock %}
